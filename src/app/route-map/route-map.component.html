<div class="route-map-container">

    @if(showMaps) {


    <div class="selection-container">
        <div class="selection-header">
            <h2>Route Map</h2>
            <p>Select a shape to view on the map.</p>
        </div>
        <mat-form-field>
            <mat-label>Route Shape</mat-label>
            <mat-select [formControl]="selectedShape" required>
                <mat-option>--</mat-option>
                @for (shape of shapesList; track shape) {
                <mat-option [value]="shape">{{shape}}</mat-option>
                }
            </mat-select>
            @if (selectedShape.hasError('required')) {
            <mat-error>Please choose an shape to plot</mat-error>
            }
        </mat-form-field>
    </div>
    <div class="map-wrapper">
        <google-map height="800" width="100%" [options]="options">
            <map-transit-layer />
            @if(vertices.length > 0) {
            <map-polyline [options]="polylineOptions" />
            @for (point of selectedShapeMarkers; track point) {
            <map-marker [position]="point.position" [label]="point.label" [options]="markerOptions" />
            }
            }
        </google-map>
    </div>

    } @else {
    <div class="data-error">
        <h2>No data available</h2>
        <p>Please upload bus schedule data to view the map.</p>
    </div>
    }
</div>